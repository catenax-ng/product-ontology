#############################################################################
# Copyright (c) 2022,2023 Contributors to Catena-X 
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
#############################################################################
# An example of dataspace asset definitions for developing polymorphic, 
# navigating skills 
#############################################################################

@prefix dash: <http://datashapes.org/dash#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix edc: <https://w3id.org/edc/v0.0.1/ns/> .
@prefix bpnl: <bpn:legal:> .
@prefix cx-common: <https://w3id.org/catenax/ontology/common#> .
@prefix cx-core: <https://w3id.org/catenax/ontology/core#> .
@prefix cx-vehicle: <https://w3id.org/catenax/ontology/vehicle#> .
@prefix cx-fx: <https://w3id.org/catenax/ontology/function#> .
@prefix cx-behaviour: <https://w3id.org/catenax/ontology/behaviour#> .
@prefix cx-reliability: <https://w3id.org/catenax/ontology/reliability#> .
@prefix asset_a: <https://example.com#asset_a#> .
@prefix asset_b: <https://example.com#asset_b#> .
@prefix asset_c: <https://example.com#asset_c#> .

# We list three assets
<https://example.com#asset_a> a cx-common:GraphAsset;
 edc:description "Sample Asset Hosting Actual Telematics Data"^^xsd:string;
 sh:shapesGraph asset_a:PhysicalObjects, 
                asset_a:ConceptualObjects, 
                asset_a:Vehicle, 
                asset_a:Part, 
                asset_a:Analysis, 
                asset_a:LoadSpectrum.

<https://example.com#asset_b> a cx-common:GraphAsset;
 edc:description "First Function Asset Implementing a RUL Prognosis"^^xsd:string;
 sh:shapesGraph asset_b:Activities,
                asset_b:RemainingUsefulLife.

<https://example.com#asset_c> a cx-common:GraphAsset;
 edc:description "Second Function Asset Implementing a HI Prognosis"^^xsd:string;
 sh:shapesGraph asset_c:Activities,
                asset_c:VehicleHealth.

# The shapes graph of Asset 'A'
asset_a:PhysicalObjects a sh:NodeShape ;
    sh:targetClass cx-core:PhysicalObject ;
    sh:property asset_a:phsicalType.
    
asset_a:physicalType a sh:PropertyShape ; 
        sh:path rdf:type ;
        sh:in (cx-vehicle:Vehicle cx-vehicle:Part).

asset_a:Vehicle a sh:NodeShape ;
    sh:targetClass cx-vehicle:Vehicle;
    sh:property asset_a:vehicleIdentificationNumber, asset_a:vehicleManufacturer, asset_a:vehicleProductionDate, asset_a:vehicleHasPart.
    
asset_a:vehicleIdentificationNumber a sh:PropertyShape ;
        sh:path cx-vehicle:vehicleIdentificationNumber ;
        sh:pattern "[A-Z0-9]{14}".

asset_a:vehicleManufacturer a sh:PropertyShape ;
        sh:path cx-vehicle:manufacturer ;
        sh:value bpnl:BPNL00000003AYRE.

asset_a:vehicleProductionDate a sh:PropertyShape ;
        sh:path cx-vehicle:productionDate ;
        sh:greaterThanOrEquals "2012-11-17"^^xsd:date; 
        sh:lessThanOrEquals "2020-12-28"^^xsd:date.

asset_a:vehicleHasPart a sh:PropertyShape ;
        sh:path cx-vehicle:hasPart ;
        sh:in (asset_a:Part).
 
asset_a:Part a sh:NodeShape ;
    sh:targetClass cx-vehicle:Part;
    sh:property asset_a:partId, asset_a:partName, asset_a:partNumber, asset_a:partSupplier, asset_a:partProductionDate, asset_a:partIsPartOf.

asset_a:partId a sh:PropertyShape ;
    sh:path cx-vehicle:id;
    sh:in (xsd:string).

asset_a:partName a sh:PropertyShape ;
    sh:path cx-vehicle:id;
    sh:value "Differential Gear"^^xsd:string.

asset_a:partNumber a sh:PropertyShape ;
    sh:path cx-vehicle:number;
    sh:in ( xsd:string ).

asset_a:partSupplier a sh:PropertyShape ;
    sh:path cx-vehicle:supplier;
    sh:value bpnl:BPNL00000003B2OM.

asset_a:partProductionDate a sh:PropertyShape ;
        sh:path cx-vehicle:productionDate ;
        sh:greaterThanOrEquals "2022-02-04"^^xsd:date; 
        sh:lessThanOrEquals "2022-02-04"^^xsd:date.

asset_a:partIsPartOf a sh:PropertyShape ;
    sh:path cx-vehicle:isPartOf;
    sh:in (asset_a:Vehicle).

asset_a:ConceptualObjects a sh:NodeShape ;
    sh:targetClass cx-core:ConceptualObject ;
    sh:property asset_a:conceptualType.
    
asset_a:conceptualType a sh:PropertyShape; 
    sh:path rdf:type ;
    sh:in ( cx-reliability:LoadSpectrum).

asset_a:Analysis a sh:NodeShape ;
    sh:targetClass  cx-reliability:Analysis;
    sh:property asset_a:analysedObject, asset_a:operatingHoursOfVehicle, asset_a:startDateTime, asset_a:endDateTim, asset_a:mileageOfVehicle, asset_a:result.

asset_a:analysedObject a sh:PropertyShape;
    sh:path cx-reliability:analysedObject;
    sh:in ( asset_a:Part ).

asset_a:operatingHoursOfVehicle a sh:PropertyShape;
    sh:path cx-reliability:operatingHoursOfVehicle.

asset_a:startDateTime a sh:PropertyShape;
    sh:path cx-core:startDateTime.

asset_a:endDateTime a sh:PropertyShape;
    sh:path cx-core:endDateTime.

asset_a:mileageOfVehicle a sh:PropertyShape;
    sh:path cx-reliability:mileageOfVehicle.

asset_a:result a sh:PropertyShape;
    sh:path cx-reliability:result;
    sh:in ( asset_a:LoadSpectrum ).

asset_a:LoadSpectrum a sh:NodeShape ;
    sh:targetClass  cx-reliability:LoadSpectrum;
    sh:property asset_a:loadSpectrumId, 
                asset_a:loadSpectrumName, 
                asset_a:loadSpectrumDescription, 
                asset_a:countingValue, 
                asset_a:countingUnit, 
                asset_a:countingMethod, 
                asset_a:channels, 
                asset_a:classes, 
                asset_a:values.

asset_a:loadSpectrumId a sh:PropertyShape;
    sh:path cx-core:id;
    sh:in ("GearOil"^^xsd:string "GearSet"^^xsd:string "Clutch"^^xsd:string).

asset_a:loadSpectrumName a sh:PropertyShape;
    sh:path cx-core:name.

asset_a:loadSpectrumDescription a sh:PropertyShape;
    sh:path cx-reliability:description.

asset_a:countingValue a sh:PropertyShape;
    sh:path cx-reliability:countingValue.

asset_a:countingUnit a sh:PropertyShape;
    sh:path cx-reliability:countingUnit.

asset_a:countingMethod a sh:PropertyShape;
    sh:path cx-reliability:countingMethod.

asset_a:countingMethod a sh:PropertyShape;
    sh:path cx-reliability:countingMethod.

asset_a:channels a sh:PropertyShape;
    sh:path cx-reliability:channels.

asset_a:classes a sh:PropertyShape;
    sh:path cx-reliability:classes.

asset_a:values a sh:PropertyShape;
    sh:path cx-reliability:values.

# The Shapes graph of Asset 'B'
asset_b:Activities a sh:NodeShape ;
    sh:targetClass cx-core:Activity ;
    sh:property asset_b:activityType.
    
asset_b:activityType a sh:PropertyShape;
    sh:path rdf:type ;
    sh:in ( cx-behaviour:Prognosis ).

asset_b:RemainingUsefulLife a sh:NodeShape;
    sh:targetClass cx-behaviour:Prognosis;
    sh:property asset_b:remainingUsefulLifeResponse, asset_b:remainingUsefulLifeObservationType.

asset_b:remainingUsefulLifeResponse a sh:PropertyShape;
    sh:path cx-fx:result;
    sh:in ( cx-behaviour:remainingUsefulLifeResponse ).

asset_b:remainingUsefulLifeObservationType a sh:PropertyShape;
    sh:path cx-behaviour:observationType;
    sh:in ( "GearOil"^^xsd:string "GearSet"^^xsd:string ).

# The Shapes graph of Asset 'B'
asset_c:Activities a sh:NodeShape ;
    sh:targetClass cx-core:Activity ;
    sh:property asset_c:activityType.
    
asset_c:activityType a sh:PropertyShape;
    sh:path rdf:type ;
    sh:in ( cx-behaviour:Prognosis ).

asset_c:VehicleHealth a sh:NodeShape;
    sh:targetClass cx-behaviour:Prognosis;
    sh:property asset_c:vehicleHealthResponse, asset_b:vehicleHealthObservationType.

asset_c:vehicleHealthResponse a sh:PropertyShape;
    sh:path cx-fx:result;
    sh:in ( cx-behaviour:vehicleHealthResponse ).

asset_c:vehicleHealthObservationType a sh:PropertyShape;
    sh:path cx-behaviour:observationType;
    sh:in ( "GearSet"^^xsd:string "Clutch"^^xsd:string ).
